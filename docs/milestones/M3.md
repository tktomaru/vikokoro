# M3: UX polish (animation / navigation / discoverability)

## Goal
- 使っていて気持ちいいアニメーション
- 大きいツリーでも迷子にならない操作（ズーム/パン/検索）
- 機能が増えても覚えやすい導線（ヘルプ/コマンドパレット）

## Already done (from M2+)
- Theme switcher: Dark / Light / Tokyo Night（localStorage保存）
- Help modal（`?` で表示、`Esc` で閉じる）
- モーダル/タブの出現アニメ
- ノード移動のスムーズ化（`left/top` transition）
- ノード追加/削除のアニメ（fade + scale）
- Zoom: `Ctrl + wheel`（mouse-centered）
- Pan: `Space + drag`
- Save status indicator（Saved/Saving/Local）
- Search modal: `Ctrl+F`（partial match + highlight + Path）
- Command palette: `Ctrl+P`

## Scope

### 1) Node enter/exit animation
- ノード追加時: fade + scale in
- ノード削除時: fade out（可能なら collapse）
- Undo/Redo でも破綻しない（最低: ノードが増減したときに自然）

### 2) Zoom / Pan
- ズーム
  - `Ctrl + wheel`（または trackpad pinch）で拡大/縮小
  - 範囲: 例 `0.5x`〜`2.0x`
  - ズーム中心: マウス位置（推奨）または画面中心
- パン
  - Space + drag で移動（推奨）
  - もしくは右ドラッグ等
- 状態保持
  - 最低: タブ切替で維持
  - 再起動でリセット（永続化なし）

### 3) Search
- `Ctrl+F` で検索モーダル
- 一致ノードにジャンプ/ハイライト
- Enter/Shift+Enter で次/前

### 4) Command palette
- `Ctrl+P` でコマンドパレット
- 例
  - New tab / Close tab
  - Toggle theme / Help
  - Search

### 5) Save status indicator
- status bar に `Saving...` / `Saved` を表示
- Browserモード（invoke失敗）でも破綻しない（no-op扱い）

## Non-goals
- クラウド同期
- リアルタイム共同編集
- レイアウトアルゴリズムの大改造（M3では最小限）
- ミニマップ

## Open questions
- ズーム: マウス中心
- パン: Space+drag
- ショートカット: macでも `Ctrl` 維持でOK？（現状に合わせる）

## Acceptance criteria
- ヘルプ無しでも操作が見つけやすい
- 大きいツリーで移動/探索が楽
- アニメが重くない（`prefers-reduced-motion` で抑制）
